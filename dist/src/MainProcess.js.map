{"version":3,"sources":["MainProcess.ts"],"names":[],"mappings":";AAAA,IAAY,CAAC,WAAM,QAAQ,CAAC,CAAA;AAC5B,yBAAqC,UAAU,CAAC,CAAA;AAIhD;IAQI;QACI,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,wBAAwB,GAAG;YAC5B,SAAS,YAAC,aAAa;gBACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC/C,CAAC;SACJ,CAAA;IACL,CAAC;IAED,6CAAuB,GAAvB,UAAwB,GAAU,EAAE,KAAS;QAA7C,iBAyBC;QAxBG,IAAI,CAAC,gBAAgB,GAAG,IAAI,wBAAa,EAAE,CAAC;QAE5C,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACT,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;QACjC,CAAC;QAED,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEnC,kBAAO,CAAC,EAAE,CAAC,kBAAkB,EAAE,UAAC,KAAK,EAAE,MAAM;YACzC,KAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC,CAAC;QAClH,CAAC,CAAC,CAAC;QAGH,kBAAO,CAAC,EAAE,CAAC,kBAAkB,EAAE,UAAC,KAAK,EAAE,MAAM;YACzC,KAAI,CAAC,0BAA0B,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;QAChE,CAAC,CAAC,CAAC;QAGH,kBAAO,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,KAAK,EAAE,OAAO;YAClC,KAAI,CAAC,0BAA0B,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;QAGH,MAAM,CAAC,IAAI,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAEO,gDAA0B,GAAlC,UAAmC,SAAgB,EAAE,OAAW;QAC5D,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,UAAC,gBAAgB;YAC/C,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;QAChG,CAAC,CAAC,CAAC;IACP,CAAC;IAGL,kBAAC;AAAD,CAnDA,AAmDC,IAAA;AAnDY,mBAAW,cAmDvB,CAAA","file":"MainProcess.js","sourcesContent":["import * as _ from \"lodash\";\nimport {BrowserWindow, ipcMain} from \"electron\";\n\n\n\nexport class MainProcess{\n\n    public foregroundWindows:any;\n\n    public backgroundWindow:any;\n\n    public backgroundProcessHandler:any;\n\n    constructor(){\n        this.foregroundWindows = [];\n        this.backgroundProcessHandler = {\n            addWindow(browserWindow) {\n                this.foregroundWindows.push(browserWindow);\n            }\n        }\n    }\n\n    createBackgroundProcess(url:string, debug:any) {\n        this.backgroundWindow = new BrowserWindow();\n\n        if (!debug) {\n            this.backgroundWindow.hide();\n        }\n\n        this.backgroundWindow.loadURL(url);\n\n        ipcMain.on('BACKGROUND_START', (event, result) => {\n            this.backgroundWindow.webContents.send.apply(this.backgroundWindow.webContents, ['BACKGROUND_START', result]);\n        });\n\n\n        ipcMain.on('BACKGROUND_REPLY', (event, result) => {\n            this.sendToAllForegroundWindows('BACKGROUND_REPLY', result);\n        });\n\n\n        ipcMain.on('CALLBACK', (event, payload) => {\n            this.sendToAllForegroundWindows('CALLBACK', payload);\n        });\n\n\n        return this.backgroundProcessHandler;\n    }\n\n    private sendToAllForegroundWindows(eventName:string, payload:any) {\n        _.forEach(this.foregroundWindows, (foregroundWindow) => {\n            foregroundWindow.webContents.send.apply(foregroundWindow.webContents, [eventName, payload]);\n        });\n    }\n\n\n}"],"sourceRoot":"src"}